{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지 - BidBar</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <main class="main">
        <div class="admin-container">
            <div class="admin-header">
                <h1 class="admin-title">관리자 페이지</h1>
                <a href="{% url 'menu_list' %}" class="admin-btn admin-btn-primary">메뉴 보기</a>
            </div>

            <div class="admin-section">
                <h2>카테고리 관리 (총 {{ categories|length }}개)</h2>
                <div class="mb-2">
                    <a href="{% url 'add_category' %}" class="admin-btn admin-btn-primary">카테고리 추가</a>
                </div>
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>카테고리명(한글)</th>
                                <th>카테고리명(영문)</th>
                                <th>부모 카테고리</th>
                                <th>우선순위</th>
                                <th>메뉴 수</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for category in categories %}
                            <tr>
                                <td>{{ category.id }}</td>
                                <td>{{ category.name|default:"-" }}</td>
                                <td>{{ category.name_en|default:"-" }}</td>
                                <td>{{ category.parent.name|default:"최상위" }}</td>
                                <td>{{ category.priority }}</td>
                                <td>{{ category.menu_items.count }}</td>
                                <td>
                                    <a href="{% url 'delete_category' category.id %}" 
                                       class="admin-btn admin-btn-danger"
                                       onclick="return confirm('정말 삭제하시겠습니까?')">삭제</a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="7" class="text-center">등록된 카테고리가 없습니다.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="admin-section">
                <h2>메뉴 관리 (총 {{ menu_items|length }}개)</h2>
                <div class="mb-2">
                    <a href="{% url 'add_menu' %}" class="admin-btn admin-btn-primary">메뉴 추가</a>
                </div>
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>메뉴명(한글)</th>
                                <th>메뉴명(영문)</th>
                                <th>가격</th>
                                <th>카테고리</th>
                                <th>우선순위</th>
                                <th>판매가능</th>
                                <th>작업</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for menu in menu_items %}
                            <tr>
                                <td>{{ menu.id }}</td>
                                <td>{{ menu.name }}</td>
                                <td>{{ menu.name_en|default:"-" }}</td>
                                <td>{{ menu.price }}</td>
                                <td>{{ menu.category.name|default:"미분류" }}</td>
                                <td>{{ menu.priority }}</td>
                                <td>{% if menu.is_available %}✓{% else %}✗{% endif %}</td>
                                <td>
                                    <a href="{% url 'edit_menu' menu.id %}" class="admin-btn admin-btn-primary">수정</a>
                                    <a href="{% url 'delete_menu' menu.id %}" 
                                       class="admin-btn admin-btn-danger"
                                       onclick="return confirm('정말 삭제하시겠습니까?')">삭제</a>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="8" class="text-center">등록된 메뉴가 없습니다.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</body>
</html>
